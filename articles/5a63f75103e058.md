---
title: "Jetpack Composeã§Shimmer Effectã‚’å®Ÿè£…ã™ã‚‹"
emoji: "ğŸ“š"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Android", "jetpackcompose"]
published: false
---
# ã¯ã˜ã‚ã«
Shimmer Effectã¨ã¯ç”»åƒã®ã‚ˆã†ãªã€ã‚¹ã‚±ãƒ«ãƒˆãƒ³ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚’ã‚­ãƒ©ã‚­ãƒ©å…‰ã‚‰ã›ã‚‹ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã§ã™ã€‚ 
![](/images/shimmer.gif)
ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®èª­ã¿è¾¼ã¿ä¸­ã§ã‚ã‚‹ã“ã¨ãŒã‚ˆã‚Šè¦–è¦šçš„ã«ã‚ã‹ã‚‹ã®ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹ã®å‘ä¸ŠãŒæœŸå¾…ã§ãã¾ã™ã€‚
# æ–¹é‡
Shimmer Effectã¯ã‚«ã‚¹ã‚¿ãƒ modifierã‚’ç”¨ã„ã¦å®Ÿè£…ã—ã¾ã™ã€‚ã‚«ã‚¹ã‚¿ãƒ modifierã¯`Modifier`ã‚¯ãƒ©ã‚¹ã®æ‹¡å¼µé–¢æ•°ã‚’å®šç¾©ã™ã‚‹ã“ã¨ã§è‡ªä½œã§ãã¾ã™ã€‚
ã‚«ã‚¹ã‚¿ãƒ modifierå®Ÿè£…æ–¹æ³•ã®è©³ç´°ã¯å‰²æ„›ã—ã¾ã™ãŒ, ã‚«ã‚¹ã‚¿ãƒ modifierä¸­ã§rememberãªã©ã®çŠ¶æ…‹ã‚’è¿½è·¡ã™ã‚‹é–¢æ•°ã‚’ä½¿ã†ã¨ãã¯`composed`é–¢æ•°ã‚’ä½¿ã„ã¾ã™ã€‚

# å®Ÿè£…
```kotlin
fun Modifier.shimmer(
    animationSpec: InfiniteRepeatableSpec<Float> = infiniteRepeatable(
        animation = tween(1500)
    ),
    colors: List<Color> = listOf(
        Color(0xFFB8B5B5),
        Color(0xFFC0C0C0),
        Color(0xFFD3D3D3),
        Color(0xFF808080),
        Color(0xFFB8B5B5)
    )
): Modifier = composed {

    var size by remember { mutableStateOf(IntSize(0,0)) }
    val startOffsetX by rememberInfiniteTransition().animateFloat(
        initialValue = -2 * size.width.toFloat(),
        targetValue = 2 * size.width.toFloat(),
        animationSpec = animationSpec
    )

    val linearGradient = Brush.linearGradient(
        colors = colors,
        start = Offset(startOffsetX, 0f),
        end = Offset(startOffsetX + size.width.toFloat(), size.height.toFloat())
    )

    background(linearGradient)
        .onGloballyPositioned { size = it.size }
}

```